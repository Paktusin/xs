{"version":3,"sources":["components/Cover/Cover.module.scss","components/Text/Text.module.scss","components/Image/Image.module.scss","components/Glass/Glass.module.scss","components/App.module.scss","components/Text/Text.tsx","components/Image/Image.tsx","components/localStorageService.ts","components/Glass/Glass.tsx","components/Cover/Cover.tsx","components/App.tsx","index.tsx"],"names":["module","exports","Text","text","onSave","className","multi","useState","inputText","setInputText","inputVisible","setInputVisible","inputRef","useRef","onKeyDown","e","shiftKey","key","useEffect","current","focus","cls","classes","onContextMenu","stopPropagation","preventDefault","style","color","content","dangerouslySetInnerHTML","__html","editor","ref","onChange","target","value","Image","image","children","document","createElement","reader","useMemo","FileReader","onInputChange","event","file","files","readAsDataURL","onload","result","addEventListener","removeEventListener","backgroundImage","click","type","accept","input","backgroundColor","LocalStorageService","prefix","this","name","localStorage","getItem","setItem","_get","removeItem","defaultValue","obj","JSON","parse","hasOwnProperty","_put","stringify","time","Date","now","has","Glass","classNames","styles","glass","defaultProject","author","back","size","description","Cover","service","get","data","setData","scale","setScale","rotate","Math","random","put","resize","React","useCallback","xDiff","window","innerWidth","yDiff","innerHeight","min","toFixed","id","coverContainer","transform","cover","authorGlass","palaroid","mainImage","colorText","border","App","onClick","html2canvas","querySelector","scrollX","scrollY","then","canvas","uri","filename","link","href","download","body","appendChild","removeChild","saveAs","toDataURL","print","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.affa2311.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"coverContainer\":\"Cover_coverContainer__3VnZD\",\"cover\":\"Cover_cover__3ATXf\",\"mainImage\":\"Cover_mainImage__3dZYe\",\"authorGlass\":\"Cover_authorGlass__vE_cr\",\"author\":\"Cover_author__3WMZ0\",\"name\":\"Cover_name__1IktC\",\"palaroid\":\"Cover_palaroid__1P_s_\",\"colorText\":\"Cover_colorText__2IxCc\",\"border\":\"Cover_border__1by4Y\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"text\":\"Text_text__2j0Pp\",\"content\":\"Text_content__1hpIK\",\"editor\":\"Text_editor__26-y1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"image\":\"Image_image__zDIeC\",\"color\":\"Image_color__2n8JU\",\"input\":\"Image_input__2swoh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"glass\":\"Glass_glass__3N3oE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"print\":\"App_print__3t3vp\"};","import React, {useEffect, useRef, useState} from \"react\";\r\nimport classes from './Text.module.scss'\r\nimport cls from 'classnames';\r\nimport {TextType} from \"../../models/text\";\r\n\r\nexport interface TextPropsType {\r\n    text: TextType;\r\n    onSave?: (text: TextType) => void;\r\n    className?: string;\r\n    multi?: boolean;\r\n}\r\n\r\nexport function Text({text, onSave, className, multi}: TextPropsType) {\r\n\r\n    const [inputText, setInputText] = useState<TextType>({...text});\r\n    const [inputVisible, setInputVisible] = useState(false);\r\n    const inputRef = useRef();\r\n\r\n    function onKeyDown(e: React.KeyboardEvent) {\r\n        if (!e.shiftKey) {\r\n            switch (e.key) {\r\n                case 'Enter':\r\n\r\n                    onSave && onSave({...inputText});\r\n                    setInputVisible(false);\r\n                    break;\r\n                case 'Escape':\r\n                    setInputText({...text});\r\n                    setInputVisible(false);\r\n                    break;\r\n                default:\r\n                    return\r\n            }\r\n        }\r\n    }\r\n\r\n    function onClick(e: React.MouseEvent<HTMLSpanElement, MouseEvent>) {\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n        if (!inputVisible) {\r\n            setInputVisible(true);\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (inputVisible) {\r\n            (inputRef as any).current.focus();\r\n        }\r\n    }, [inputVisible])\r\n\r\n    return (\r\n        <span className={cls(classes.text, className)}\r\n              onContextMenu={onClick}\r\n              style={{color: text.color}}>\r\n            <span className={classes.content} dangerouslySetInnerHTML={{__html: text.text}}/>\r\n            {inputVisible && <div className={classes.editor}>\r\n                {!multi && <input ref={inputRef as any}\r\n                                  onChange={e => setInputText({...inputText, text: e.target.value})}\r\n                                  value={inputText.text}\r\n                                  onKeyDown={onKeyDown}/>}\r\n                {multi && <textarea ref={inputRef as any}\r\n                                    onChange={e => setInputText({...inputText, text: e.target.value})}\r\n                                    value={inputText.text}\r\n                                    onKeyDown={onKeyDown}/>}\r\n                <input\r\n                    onChange={e => setInputText({...inputText, color: e.target.value})}\r\n                    value={inputText.color}\r\n                    onKeyDown={onKeyDown}/>\r\n            </div>}\r\n        </span>\r\n    );\r\n}\r\n","import React, {FunctionComponent, useEffect, useMemo, useRef} from \"react\";\r\nimport classes from './Image.module.scss'\r\nimport cls from 'classnames';\r\n\r\nexport interface ImagePropsType {\r\n    image: string;\r\n    color?: string;\r\n    className?: string;\r\n    onChange?: (image: string) => void;\r\n}\r\n\r\nexport const Image: FunctionComponent<ImagePropsType> = ({image, color, children, className, onChange}) => {\r\n\r\n    const inputRef = useRef<HTMLInputElement>(document.createElement('input'))\r\n    const reader = useMemo(() => new FileReader(), []);\r\n    reader.onload = updateFile;\r\n\r\n    useEffect(() => {\r\n        inputRef.current.addEventListener('change', onInputChange);\r\n        return () => {\r\n            inputRef.current.removeEventListener('change', onInputChange);\r\n        }\r\n    }, [])\r\n\r\n    function updateFile(event: any) {\r\n        onChange && onChange(reader.result as string);\r\n    }\r\n\r\n    function onInputChange(event: any) {\r\n        const [file] = event.target.files;\r\n        if (file) {\r\n            reader.readAsDataURL(file);\r\n        }\r\n    }\r\n\r\n    function onClick(event: React.MouseEvent<HTMLDivElement, MouseEvent>) {\r\n        event.stopPropagation();\r\n        event.preventDefault();\r\n        inputRef.current.click();\r\n    }\r\n\r\n    return (\r\n        <div className={cls(className, classes.image)} style={{backgroundImage: `url(${image})`}}\r\n             onContextMenu={onClick}>\r\n            <input ref={inputRef} type=\"file\" accept=\"image/png, image/jpeg\" className={classes.input}/>\r\n            {color && <div className={classes.color} style={{backgroundColor: color}}/>}\r\n            {children}\r\n        </div>\r\n    );\r\n}\r\n","export default class LocalStorageService {\n    prefix = '';\n\n    constructor(prefix = '') {\n        this.prefix = prefix + '_'\n    }\n\n    _get(name: string) {\n        return localStorage.getItem(this.prefix + name) as any\n    }\n\n    _put(name: string, value: any) {\n        localStorage.setItem(this.prefix + name, value);\n    }\n\n    has(name: string) {\n        return this._get(name) !== null\n    }\n\n    remove(name: string) {\n        localStorage.removeItem(this.prefix + name);\n    }\n\n    get(name: string, defaultValue?: any) {\n        let obj = JSON.parse(this._get(name));\n        return (obj && obj.hasOwnProperty('value')) ? obj.value : defaultValue;\n    }\n\n    put(name: string, value: any) {\n        this._put(name, JSON.stringify({time: Date.now(), value: value}));\n    }\n\n    time(name: string) {\n        let obj = JSON.parse(this._get(name));\n        return obj.time;\n    }\n\n    fresh(name: string, time: Date) {\n        return this.has(name) && this.time(name) > time\n    }\n}\n\nexport const localStorageService = new LocalStorageService('xs');\n","import React, {FunctionComponent, PropsWithChildren} from \"react\";\r\nimport styles from './Glass.module.scss'\r\nimport classNames from \"classnames\";\r\n\r\nexport interface GlassPropsType {\r\n    className?: string\r\n}\r\n\r\nexport const Glass: FunctionComponent<GlassPropsType> = ({children, className}) => {\r\n    return (\r\n        <div className={classNames(className, styles.glass)}>{children}</div>\r\n    )\r\n}\r\n","import React, {useEffect, useMemo, useState} from \"react\";\r\nimport classes from './Cover.module.scss'\r\nimport {Text} from \"../Text/Text\";\r\nimport {Image} from \"../Image/Image\";\r\nimport {CoverType} from \"../../models/cover\";\r\nimport LocalStorageService from \"../../components/localStorageService\";\r\nimport {Glass} from \"../Glass/Glass\";\r\n\r\nconst defaultProject = {\r\n    image: '',\r\n    author: {text: 'Nadegda Davlichina', color: 'black'},\r\n    name: {text: 'Test pattern', color: 'black'},\r\n    back: {color: 'rgba(255,255,0,.5)', image: ''},\r\n    size: '45x45',\r\n    description: {text: 'Палитра DMS', color: 'white'}\r\n};\r\n\r\nexport function Cover() {\r\n    const service = useMemo(() => new LocalStorageService('xs'), []);\r\n    const [data, setData] = useState<CoverType>(service.get('test', defaultProject));\r\n    const [scale, setScale] = useState<string>('0');\r\n    const rotate = Math.random() * 6 - 3\r\n\r\n    useEffect(() => {\r\n        service.put('test', data)\r\n    }, [data])\r\n\r\n    const resize = React.useCallback(() => {\r\n        const xDiff = window.innerWidth / 720;\r\n        const yDiff = window.innerHeight / 1280;\r\n        setScale(Math.min(xDiff, yDiff).toFixed(2));\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        resize();\r\n        window.addEventListener('resize', resize);\r\n        return () => {\r\n            window.removeEventListener('resize', resize);\r\n        }\r\n    }, [])\r\n\r\n    return (\r\n        <div id={'cover'} className={classes.coverContainer}\r\n             style={{transform: `scale(${scale})`}}>\r\n            <Image image={data.back.image} className={classes.cover}\r\n                   onChange={image => setData({...data, back: {...data.back, image}})}>\r\n            </Image>\r\n            <Glass className={classes.authorGlass}>\r\n                <Text text={data.author} className={classes.author} onSave={author => setData({...data, author})}/>\r\n            </Glass>\r\n            <div className={classes.palaroid} style={{transform: `rotate(${rotate}deg)`}}>\r\n                <Image image={data.image} className={classes.mainImage} onChange={image => setData({...data, image})}/>\r\n                <Text text={data.name} className={classes.name} onSave={name => setData({...data, name})}/>\r\n            </div>\r\n            <div className={classes.colorText}>\r\n                <div className={classes.border} style={{backgroundColor: data.description.color}}/>\r\n                <Text multi={true} text={data.description} onSave={description => setData({...data, description})}/>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport {Cover} from \"./Cover/Cover\";\r\nimport styles from './App.module.scss'\r\nimport html2canvas from \"html2canvas\";\r\n\r\nfunction App() {\r\n\r\n    function print() {\r\n        html2canvas(document.querySelector(\"#cover\") as HTMLElement, {\r\n            scrollX: 0,\r\n            scrollY: -window.scrollY\r\n        }).then(canvas => {\r\n            saveAs(canvas.toDataURL(), 'cover.png');\r\n        });\r\n    }\r\n\r\n    function saveAs(uri: string, filename: string) {\r\n        const link = document.createElement('a');\r\n        link.href = uri;\r\n        link.download = filename;\r\n        document.body.appendChild(link);\r\n        link.click();\r\n        document.body.removeChild(link);\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Cover/>\r\n            <button onClick={print} className={styles.print}>Print</button>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.scss';\r\nimport App from './components/App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App/>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}