(this.webpackJsonpxs=this.webpackJsonpxs||[]).push([[0],[,,function(e,t,a){e.exports={coverContainer:"Cover_coverContainer__3VnZD",cover:"Cover_cover__3ATXf",mainImage:"Cover_mainImage__3dZYe",authorGlass:"Cover_authorGlass__vE_cr",author:"Cover_author__3WMZ0",name:"Cover_name__1IktC",palaroid:"Cover_palaroid__1P_s_",colorText:"Cover_colorText__2IxCc",border:"Cover_border__1by4Y"}},,,function(e,t,a){e.exports={text:"Text_text__2j0Pp",content:"Text_content__1hpIK",editor:"Text_editor__26-y1"}},function(e,t,a){e.exports={image:"Image_image__zDIeC",color:"Image_color__2n8JU",input:"Image_input__2swoh"}},,,,,function(e,t,a){e.exports={glass:"Glass_glass__3N3oE"}},function(e,t,a){e.exports={print:"App_print__3t3vp"}},,function(e,t,a){e.exports=a(20)},,,,,function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(8),c=a.n(o),i=(a(19),a(1)),u=a(3),l=a(2),s=a.n(l),m=a(5),f=a.n(m),v=a(4),d=a.n(v);function _(e){var t=e.text,a=e.onSave,o=e.className,c=e.multi,l=Object(n.useState)(Object(i.a)({},t)),s=Object(u.a)(l,2),m=s[0],v=s[1],_=Object(n.useState)(!1),g=Object(u.a)(_,2),p=g[0],h=g[1],b=Object(n.useRef)();function x(e){if(!e.shiftKey)switch(e.key){case"Enter":a&&a(Object(i.a)({},m)),h(!1);break;case"Escape":v(Object(i.a)({},t)),h(!1);break;default:return}}return Object(n.useEffect)((function(){p&&b.current.focus()}),[p]),r.a.createElement("span",{className:d()(f.a.text,o),onContextMenu:function(e){e.stopPropagation(),e.preventDefault(),p||h(!0)},style:{color:t.color}},r.a.createElement("span",{className:f.a.content,dangerouslySetInnerHTML:{__html:t.text}}),p&&r.a.createElement("div",{className:f.a.editor},!c&&r.a.createElement("input",{ref:b,onChange:function(e){return v(Object(i.a)({},m,{text:e.target.value}))},value:m.text,onKeyDown:x}),c&&r.a.createElement("textarea",{ref:b,onChange:function(e){return v(Object(i.a)({},m,{text:e.target.value}))},value:m.text,onKeyDown:x}),r.a.createElement("input",{onChange:function(e){return v(Object(i.a)({},m,{color:e.target.value}))},value:m.color,onKeyDown:x})))}var g=a(6),p=a.n(g),h=function(e){var t=e.image,a=e.color,o=e.children,c=e.className,i=e.onChange,l=Object(n.useRef)(document.createElement("input")),s=Object(n.useMemo)((function(){return new FileReader}),[]);function m(e){var t=Object(u.a)(e.target.files,1)[0];t&&s.readAsDataURL(t)}return s.onload=function(e){i&&i(s.result)},Object(n.useEffect)((function(){return l.current.addEventListener("change",m),function(){l.current.removeEventListener("change",m)}}),[]),r.a.createElement("div",{className:d()(c,p.a.image),style:{backgroundImage:"url(".concat(t,")")},onContextMenu:function(e){e.stopPropagation(),e.preventDefault(),l.current.click()}},r.a.createElement("input",{ref:l,type:"file",accept:"image/png, image/jpeg",className:p.a.input}),a&&r.a.createElement("div",{className:p.a.color,style:{backgroundColor:a}}),o)},b=a(9),x=a(10),E=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";Object(b.a)(this,e),this.prefix="",this.prefix=t+"_"}return Object(x.a)(e,[{key:"_get",value:function(e){return localStorage.getItem(this.prefix+e)}},{key:"_put",value:function(e,t){localStorage.setItem(this.prefix+e,t)}},{key:"has",value:function(e){return null!==this._get(e)}},{key:"remove",value:function(e){localStorage.removeItem(this.prefix+e)}},{key:"get",value:function(e,t){var a=JSON.parse(this._get(e));return a&&a.hasOwnProperty("value")?a.value:t}},{key:"put",value:function(e,t){this._put(e,JSON.stringify({time:Date.now(),value:t}))}},{key:"time",value:function(e){return JSON.parse(this._get(e)).time}},{key:"fresh",value:function(e,t){return this.has(e)&&this.time(e)>t}}]),e}(),O=(new E("xs"),a(11)),j=a.n(O),y=function(e){var t=e.children,a=e.className;return r.a.createElement("div",{className:d()(a,j.a.glass)},t)},C={image:"",author:{text:"Nadegda Davlichina",color:"black"},name:{text:"Test pattern",color:"black"},back:{color:"rgba(255,255,0,.5)",image:""},size:"45x45",description:{text:"\u041f\u0430\u043b\u0438\u0442\u0440\u0430 DMS",color:"white"}};function k(){var e=Object(n.useMemo)((function(){return new E("xs")}),[]),t=Object(n.useState)(e.get("test",C)),a=Object(u.a)(t,2),o=a[0],c=a[1],l=Object(n.useState)("0"),m=Object(u.a)(l,2),f=m[0],v=m[1],d=6*Math.random()-3;Object(n.useEffect)((function(){e.put("test",o)}),[o]);var g=r.a.useCallback((function(){var e=window.innerWidth/720,t=window.innerHeight/1280;v(Math.min(e,t).toFixed(2))}),[]);return Object(n.useEffect)((function(){return g(),window.addEventListener("resize",g),function(){window.removeEventListener("resize",g)}}),[]),r.a.createElement("div",{id:"cover",className:s.a.coverContainer,style:{transform:"scale(".concat(f,")")}},r.a.createElement(h,{image:o.back.image,className:s.a.cover,onChange:function(e){return c(Object(i.a)({},o,{back:Object(i.a)({},o.back,{image:e})}))}}),r.a.createElement(y,{className:s.a.authorGlass},r.a.createElement(_,{text:o.author,className:s.a.author,onSave:function(e){return c(Object(i.a)({},o,{author:e}))}})),r.a.createElement("div",{className:s.a.palaroid,style:{transform:"rotate(".concat(d,"deg)")}},r.a.createElement(h,{image:o.image,className:s.a.mainImage,onChange:function(e){return c(Object(i.a)({},o,{image:e}))}}),r.a.createElement(_,{text:o.name,className:s.a.name,onSave:function(e){return c(Object(i.a)({},o,{name:e}))}})),r.a.createElement("div",{className:s.a.colorText},r.a.createElement("div",{className:s.a.border,style:{backgroundColor:o.description.color}}),r.a.createElement(_,{multi:!0,text:o.description,onSave:function(e){return c(Object(i.a)({},o,{description:e}))}})))}var N=a(12),w=a.n(N),S=a(13),I=a.n(S);var D=function(){return r.a.createElement("div",null,r.a.createElement(k,null),r.a.createElement("button",{onClick:function(){I()(document.querySelector("#cover"),{scrollX:0,scrollY:-window.scrollY}).then((function(e){!function(e,t){var a=document.createElement("a");a.href=e,a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a)}(e.toDataURL(),"cover.png")}))},className:w.a.print},"Print"))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(D,null)),document.getElementById("root"))}],[[14,1,2]]]);
//# sourceMappingURL=main.affa2311.chunk.js.map