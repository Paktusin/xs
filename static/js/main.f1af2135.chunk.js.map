{"version":3,"sources":["components/Cover/Cover.module.scss","components/Image/Image.module.scss","components/Text/Text.module.scss","components/Glass/Glass.module.scss","components/App.module.scss","components/Text/Text.tsx","components/Image/Image.tsx","components/localStorageService.ts","components/Glass/Glass.tsx","components/Cover/Cover.tsx","components/App.tsx","index.tsx"],"names":["module","exports","Text","text","onSave","className","useState","inputText","setInputText","inputVisible","setInputVisible","inputRef","useRef","document","createElement","onKeyDown","e","key","useEffect","current","focus","cls","classes","onContextMenu","stopPropagation","preventDefault","style","color","editor","ref","onChange","target","value","Image","image","children","reader","useMemo","FileReader","onInputChange","event","file","files","readAsDataURL","onload","result","addEventListener","removeEventListener","backgroundImage","click","type","accept","input","backgroundColor","LocalStorageService","prefix","this","name","localStorage","getItem","setItem","_get","removeItem","defaultValue","obj","JSON","parse","hasOwnProperty","_put","stringify","time","Date","now","has","Glass","classNames","styles","glass","defaultProject","author","back","size","description","Cover","service","get","data","setData","scale","setScale","rotate","Math","random","put","resize","React","useCallback","xDiff","window","innerWidth","yDiff","innerHeight","min","toFixed","id","coverContainer","transform","cover","authorGlass","palaroid","mainImage","colorText","border","App","onClick","html2canvas","querySelector","scrollX","scrollY","then","canvas","uri","filename","link","href","download","body","appendChild","removeChild","saveAs","toDataURL","print","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.f1af2135.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"coverContainer\":\"Cover_coverContainer__3VnZD\",\"cover\":\"Cover_cover__3ATXf\",\"mainImage\":\"Cover_mainImage__3dZYe\",\"authorGlass\":\"Cover_authorGlass__vE_cr\",\"author\":\"Cover_author__3WMZ0\",\"name\":\"Cover_name__1IktC\",\"palaroid\":\"Cover_palaroid__1P_s_\",\"colorText\":\"Cover_colorText__2IxCc\",\"border\":\"Cover_border__1by4Y\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"image\":\"Image_image__zDIeC\",\"color\":\"Image_color__2n8JU\",\"input\":\"Image_input__2swoh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"text\":\"Text_text__2j0Pp\",\"editor\":\"Text_editor__26-y1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"glass\":\"Glass_glass__3N3oE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"print\":\"App_print__3t3vp\"};","import React, {useEffect, useRef, useState} from \"react\";\r\nimport classes from './Text.module.scss'\r\nimport cls from 'classnames';\r\nimport {TextType} from \"../../models/text\";\r\n\r\nexport interface TextPropsType {\r\n    text: TextType;\r\n    onSave?: (text: TextType) => void;\r\n    className?: string;\r\n}\r\n\r\nexport function Text({text, onSave, className}: TextPropsType) {\r\n\r\n    const [inputText, setInputText] = useState<TextType>({...text});\r\n    const [inputVisible, setInputVisible] = useState(false);\r\n    const inputRef = useRef<HTMLInputElement>(document.createElement(\"input\"));\r\n\r\n    function onKeyDown(e: React.KeyboardEvent) {\r\n        switch (e.key) {\r\n            case 'Enter':\r\n                onSave && onSave({...inputText});\r\n                setInputVisible(false);\r\n                break;\r\n            case 'Escape':\r\n                setInputText({...text});\r\n                setInputVisible(false);\r\n                break;\r\n            default:\r\n                return\r\n        }\r\n        setInputVisible(false);\r\n    }\r\n\r\n    function onClick(e: React.MouseEvent<HTMLSpanElement, MouseEvent>) {\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n        if (!inputVisible) {\r\n            setInputVisible(true);\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (inputVisible) {\r\n            (inputRef as any).current.focus();\r\n        }\r\n    }, [inputVisible])\r\n\r\n    return (\r\n        <span className={cls(classes.text, className)} onContextMenu={onClick} style={{color: text.color}}>\r\n            {text.text}\r\n            {inputVisible && <div className={classes.editor}>\r\n                <input ref={inputRef}\r\n                       onChange={e => setInputText({...inputText, text: e.target.value})}\r\n                       value={inputText.text}\r\n                       onKeyDown={onKeyDown}/>\r\n                <input\r\n                       onChange={e => setInputText({...inputText, color: e.target.value})}\r\n                       value={inputText.color}\r\n                       onKeyDown={onKeyDown}/>\r\n            </div>}\r\n        </span>\r\n    );\r\n}\r\n","import React, {FunctionComponent, useEffect, useMemo, useRef} from \"react\";\r\nimport classes from './Image.module.scss'\r\nimport cls from 'classnames';\r\n\r\nexport interface ImagePropsType {\r\n    image: string;\r\n    color?: string;\r\n    className?: string;\r\n    onChange?: (image: string) => void;\r\n}\r\n\r\nexport const Image: FunctionComponent<ImagePropsType> = ({image, color, children, className, onChange}) => {\r\n\r\n    const inputRef = useRef<HTMLInputElement>(document.createElement('input'))\r\n    const reader = useMemo(() => new FileReader(), []);\r\n    reader.onload = updateFile;\r\n\r\n    useEffect(() => {\r\n        inputRef.current.addEventListener('change', onInputChange);\r\n        return () => {\r\n            inputRef.current.removeEventListener('change', onInputChange);\r\n        }\r\n    }, [])\r\n\r\n    function updateFile(event: any) {\r\n        onChange && onChange(reader.result as string);\r\n    }\r\n\r\n    function onInputChange(event: any) {\r\n        const [file] = event.target.files;\r\n        if (file) {\r\n            reader.readAsDataURL(file);\r\n        }\r\n    }\r\n\r\n    function onClick(event: React.MouseEvent<HTMLDivElement, MouseEvent>) {\r\n        event.stopPropagation();\r\n        event.preventDefault();\r\n        inputRef.current.click();\r\n    }\r\n\r\n    return (\r\n        <div className={cls(className, classes.image)} style={{backgroundImage: `url(${image})`}}\r\n             onContextMenu={onClick}>\r\n            <input ref={inputRef} type=\"file\" accept=\"image/png, image/jpeg\" className={classes.input}/>\r\n            {color && <div className={classes.color} style={{backgroundColor: color}}/>}\r\n            {children}\r\n        </div>\r\n    );\r\n}\r\n","export default class LocalStorageService {\n    prefix = '';\n\n    constructor(prefix = '') {\n        this.prefix = prefix + '_'\n    }\n\n    _get(name: string) {\n        return localStorage.getItem(this.prefix + name) as any\n    }\n\n    _put(name: string, value: any) {\n        localStorage.setItem(this.prefix + name, value);\n    }\n\n    has(name: string) {\n        return this._get(name) !== null\n    }\n\n    remove(name: string) {\n        localStorage.removeItem(this.prefix + name);\n    }\n\n    get(name: string, defaultValue?: any) {\n        let obj = JSON.parse(this._get(name));\n        return (obj && obj.hasOwnProperty('value')) ? obj.value : defaultValue;\n    }\n\n    put(name: string, value: any) {\n        this._put(name, JSON.stringify({time: Date.now(), value: value}));\n    }\n\n    time(name: string) {\n        let obj = JSON.parse(this._get(name));\n        return obj.time;\n    }\n\n    fresh(name: string, time: Date) {\n        return this.has(name) && this.time(name) > time\n    }\n}\n\nexport const localStorageService = new LocalStorageService('xs');\n","import React, {FunctionComponent, PropsWithChildren} from \"react\";\r\nimport styles from './Glass.module.scss'\r\nimport classNames from \"classnames\";\r\n\r\nexport interface GlassPropsType {\r\n    className?: string\r\n}\r\n\r\nexport const Glass: FunctionComponent<GlassPropsType> = ({children, className}) => {\r\n    return (\r\n        <div className={classNames(className, styles.glass)}>{children}</div>\r\n    )\r\n}\r\n","import React, {useEffect, useMemo, useState} from \"react\";\r\nimport classes from './Cover.module.scss'\r\nimport {Text} from \"../Text/Text\";\r\nimport {Image} from \"../Image/Image\";\r\nimport {CoverType} from \"../../models/cover\";\r\nimport LocalStorageService from \"../../components/localStorageService\";\r\nimport {Glass} from \"../Glass/Glass\";\r\n\r\nconst defaultProject = {\r\n    image: '',\r\n    author: {text: 'Nadegda Davlichina', color: 'black'},\r\n    name: {text: 'Test pattern', color: 'black'},\r\n    back: {color: 'rgba(255,255,0,.5)', image: ''},\r\n    size: '45x45',\r\n    description: {text: 'Палитра DMS', color: 'white'}\r\n};\r\n\r\nexport function Cover() {\r\n    const service = useMemo(() => new LocalStorageService('xs'), []);\r\n    const [data, setData] = useState<CoverType>(service.get('test', defaultProject));\r\n    const [scale, setScale] = useState<string>('0');\r\n    const rotate = Math.random() * 6 - 3\r\n\r\n    useEffect(() => {\r\n        service.put('test', data)\r\n    }, [data])\r\n\r\n    const resize = React.useCallback(() => {\r\n        const xDiff = window.innerWidth / 720;\r\n        const yDiff = window.innerHeight / 1280;\r\n        setScale(Math.min(xDiff, yDiff).toFixed(2));\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        resize();\r\n        window.addEventListener('resize', resize);\r\n        return () => {\r\n            window.removeEventListener('resize', resize);\r\n        }\r\n    }, [])\r\n\r\n    return (\r\n        <div id={'cover'} className={classes.coverContainer}\r\n             style={{transform: `scale(${scale})`}}>\r\n            <Image image={data.back.image} className={classes.cover}\r\n                   onChange={image => setData({...data, back: {...data.back, image}})}>\r\n            </Image>\r\n            <Glass className={classes.authorGlass}>\r\n                <Text text={data.author} className={classes.author} onSave={author => setData({...data, author})}/>\r\n            </Glass>\r\n            <div className={classes.palaroid} style={{transform: `rotate(${rotate}deg)`}}>\r\n                <Image image={data.image} className={classes.mainImage} onChange={image => setData({...data, image})}/>\r\n                <Text text={data.name} className={classes.name} onSave={name => setData({...data, name})}/>\r\n            </div>\r\n            <div className={classes.colorText}>\r\n                <div className={classes.border} style={{backgroundColor: data.description.color}}/>\r\n                <Text text={data.description} onSave={description => setData({...data, description})}/>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport {Cover} from \"./Cover/Cover\";\r\nimport styles from './App.module.scss'\r\nimport html2canvas from \"html2canvas\";\r\n\r\nfunction App() {\r\n\r\n    function print() {\r\n        html2canvas(document.querySelector(\"#cover\") as HTMLElement, {\r\n            scrollX: 0,\r\n            scrollY: -window.scrollY\r\n        }).then(canvas => {\r\n            saveAs(canvas.toDataURL(), 'cover.png');\r\n        });\r\n    }\r\n\r\n    function saveAs(uri: string, filename: string) {\r\n        const link = document.createElement('a');\r\n        link.href = uri;\r\n        link.download = filename;\r\n        document.body.appendChild(link);\r\n        link.click();\r\n        document.body.removeChild(link);\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Cover/>\r\n            <button onClick={print} className={styles.print}>Print</button>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.scss';\r\nimport App from './components/App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App/>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}